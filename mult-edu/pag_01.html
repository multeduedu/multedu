<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Multiplicador x11</title>
  <link rel="stylesheet" href="./css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    /* Estilos existentes */
    .custom-select,
    .custom-input {
      width: 70px;
      text-align: center;
      font-weight: bold;
      font-size: 1.2rem;
    }

    .x11-label {
      font-size: 1.5rem;
      font-weight: bold;
      margin-left: 10px;
      display: inline-block;
      vertical-align: middle;
    }

    .button-label {
      font-size: 1rem;
      font-weight: bold;
      width: 120px;
      text-align: center;
    }

    .centered-row {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      flex-wrap: nowrap;
      position: relative;
    }

    .button-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }

    .container {
      height: 100vh;
      padding: 40px;
    }

    .video-container {
      position: fixed;
      top: 10px;
      right: 10px;
      width: 350px;
      height: 100px;
      z-index: 100;
    }

    .arrow {
      position: absolute;
      font-size: 2rem;
      color: red;
      animation: bounce 1s infinite;
      transition: left 0.3s ease;
    }

    @keyframes bounce {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-10px);
      }
    }

    /* Estilo para o input do resultado digitado */
    .custom-input {
      width: 80px;
      font-size: 2rem;
    }

    /* Estilos responsivos existentes */
    @media (max-width: 768px) {
      .video-container {
        position: relative;
        width: 100%;
        height: auto;
        top: 0;
        right: 0;
        margin-bottom: 20px;
      }
       /* Ajustes para inputs e r√°dios em telas pequenas */
       .centered-row.mb-4 {
           flex-wrap: wrap; /* Permite quebra de linha para os inputs */
           justify-content: space-around; /* Distribui inputs ao quebrar */
           gap: 15px; /* Espa√ßo entre inputs empilhados ou em linha */
       }
       .radio-input-wrapper {
           flex-direction: row; /* R√°dio e input lado a lado */
           gap: 5px; /* Espa√ßo entre r√°dio e input */
       }
       .text-center { /* Garante que o container de cada input/radio centralize */
           width: auto; /* Deixa o wrapper determinar a largura */
           text-align: center; /* Mant√©m o text-align caso o flex n√£o ocupe 100% */
       }
    }

    /* Novo estilo para o wrapper do bot√£o de r√°dio e input */
    .radio-input-wrapper {
      display: flex;
      align-items: center; /* Alinha verticalmente o r√°dio e o input */
      gap: 5px; /* Espa√ßo entre o r√°dio e o input */
      justify-content: center; /* Centraliza o conte√∫do dentro deste wrapper */
    }

    /* Opcional: Estilizar o bot√£o de r√°dio se necess√°rio */
    .radio-input-wrapper input[type="radio"] {
        /* Exemplo: ajustar tamanho */
        width: 20px;
        height: 20px;
        cursor: pointer;
    }


  </style>
</head>

<body class="p-4">
  <header style="margin-bottom: 2rem;">
    <a href="./atividades.html"><button type="button" class="voltar-main">‚Üê Voltar</button></a>
  </header>
  
  <br><br>
  <h1 style="
	text-align: center;
	font-size: 3rem;
	font-weight: bold;
	font-family: 'Indie Flower', cursive;
	background: linear-gradient(to right, #ff7f50, #ff6347);
	-webkit-background-clip: text;
	color: transparent;
	text-shadow: 1px 1px 2px #eab359;">
    Multiplica√ß√£o por 11 - Metodologia Trachtenberg
  </h1>

  <div class="video-container">
    <iframe 
      width="350" 
      height="200" 
      src="https://www.youtube.com/embed/geMzGlJzUkc?si=EBkL_Y6FLpdqZswk" 
      title="YouTube video player" 
      frameborder="0" 
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
      allowfullscreen>
    </iframe>
  </div>

  <div class="container d-flex flex-column justify-content-center align-items-center">
    <h3 class="mb-5 text-center">Selecione os n√∫meros e digite valores:</h3>

    <div class="button-row mb-5">
      <button class="btn btn-secondary button-label" onclick="mostrarAjuda(5)">5¬∞ D√≠gito</button>
      <button class="btn btn-secondary button-label" onclick="mostrarAjuda(4)">4¬∞ D√≠gito</button>
      <button class="btn btn-secondary button-label" onclick="mostrarAjuda(3)">3¬∞ D√≠gito</button>
      <button class="btn btn-secondary button-label" onclick="mostrarAjuda(2)">2¬∞ D√≠gito</button>
      <button class="btn btn-secondary button-label" onclick="mostrarAjuda(1)">1¬∞ D√≠gito</button>
    </div>

<audio id="soundButton5" src="./Sons/click-button.mp3"></audio>
<audio id="soundButton4" src="./Sons/click-button.mp3"></audio>
<audio id="soundButton3" src="./Sons/click-button.mp3"></audio>
<audio id="soundButton2" src="./Sons/click-button.mp3"></audio>
<audio id="soundButton1" src="./Sons/click-button.mp3"></audio>

    <div class="centered-row mb-5" id="selectRow">
      <div id="arrow" class="arrow" style="display: none;">‚¨áÔ∏è</div>

      <select class="form-select bg-danger text-white custom-select" id="select5" disabled>
        <option value="0" selected>0</option>
        </select>

      <select class="form-select bg-warning custom-select" id="select4"></select>
      <select class="form-select bg-success text-white custom-select" id="select3"></select>
      <select class="form-select bg-primary text-white custom-select" id="select2"></select>
      <select class="form-select bg-info text-white custom-select" id="select1"></select>

      <div class="x11-label">√ó11</div>
    </div>

    <div class="centered-row mb-4">
      <div class="text-center">
        <input placeholder="5¬∫" type="text" class="form-control custom-input" maxlength="1" inputmode="numeric"
          pattern="[0-9]" id="input5" />
      </div>

      <div class="text-center">
        <div class="radio-input-wrapper"> <input type="radio" name="digitSelector" id="radioDigit4"> <input placeholder="4¬∫" type="text" class="form-control custom-input" maxlength="1" inputmode="numeric"
            pattern="[0-9]" id="input4" />
        </div>
      </div>

      <div class="text-center">
        <div class="radio-input-wrapper"> <input type="radio" name="digitSelector" id="radioDigit3"> <input placeholder="3¬∫" type="text" class="form-control custom-input" maxlength="1" inputmode="numeric"
            pattern="[0-9]" id="input3" />
        </div>
      </div>

      <div class="text-center">
        <div class="radio-input-wrapper"> <input type="radio" name="digitSelector" id="radioDigit2"> <input placeholder="2¬∫" type="text" class="form-control custom-input" maxlength="1" inputmode="numeric"
            pattern="[0-9]" id="input2" />
        </div>
      </div>

      <div class="text-center">
        <input placeholder="1¬∫" type="text" class="form-control custom-input" maxlength="1" inputmode="numeric"
          pattern="[0-9]" id="input1" />
      </div>
    </div>

    <div class="mt-4 d-flex align-items-center gap-3">
      <button class="btn btn-primary btn-lg w-100" onclick="multiplicarNumeroDosSelects()">Conferir</button>
      <button class="btn btn-primary btn-lg w-100" onclick="limparSelects()">Limpar</button>
    </div>
  </div>

  <audio id="sound1" src="mult-edu\img\Sons\button-305770.mp3"></audio>
  <audio id="sound2" src="mult-edu\img\Sons\button-305770.mp3"></audio>
  <audio id="sound3" src="mult-edu\img\Sons\button-305770.mp3"></audio>
  <audio id="sound4" src="mult-edu\img\Sons\button-305770.mp3"></audio>

  <script>
    // Preenche os selects 1 a 4 (alterado, antes ia at√© 5) com op√ß√µes de 0 a 9
    // Select 5 √© desabilitado e fixo em 0, ent√£o ele n√£o precisa ser preenchido
    for (let i = 1; i <= 4; i++) {
      const select = document.getElementById(`select${i}`);
      if (select) { // Verifica se o select existe (select5 √© desabilitado)
        // Remove as op√ß√µes existentes (se houver, embora neste caso n√£o haja)
        select.innerHTML = '';
        for (let j = 0; j <= 9; j++) {
          const option = document.createElement("option");
          option.value = j;
          option.textContent = j;
          select.appendChild(option);
        }
      }
    }
     // Define a op√ß√£o selecionada padr√£o para 0 em todos os selects preenchidos
     for (let i = 1; i <= 4; i++) {
        const select = document.getElementById(`select${i}`);
         if (select) select.value = '0';
     }


    // Limita inputs a 1 n√∫mero (mantido)
    document.querySelectorAll('.custom-input').forEach(input => {
      input.addEventListener('input', () => {
        input.value = input.value.replace(/[^0-9]/g, '').slice(0, 1);
      });
    });

// Fun√ß√£o para reproduzir som ao clicar nos bot√µes********************************************************
function playSound(buttonId) {
  const sound = document.getElementById(`soundButton${buttonId}`);
  if (sound) {
    sound.currentTime = 0; // Reinicia o som caso j√° esteja tocando
    sound.play();
  }
}

// Atualizar os eventos dos bot√µes para incluir o som
document.getElementById("button5").addEventListener("click", () => playSound(5));
document.getElementById("button4").addEventListener("click", () => playSound(4));
document.getElementById("button3").addEventListener("click", () => playSound(3));
document.getElementById("button2").addEventListener("click", () => playSound(2));
document.getElementById("button1").addEventListener("click", () => playSound(1));

    // Fun√ß√£o para som + popup + seta (mantida)
    function mostrarAjuda(numero) {
      const som = document.getElementById(`sound${numero}`);
      if (som) som.play();

      const mensagens = {
        1: "Mantenha o primeiro valor (da direita) e coloque na caixa.",
        2: "Somar o 1¬∫ valor (da direita) ao 2¬∫ valor e coloque na caixa. Se a soma for 10 ou mais, guarde a dezena e coloque apenas a unidade.",
        3: "Somar o 2¬∫ valor ao 3¬∫ valor e coloque na caixa. Some a dezena guardada (se houver). Se o total for 10 ou mais, guarde a nova dezena.",
        4: "Somar o 3¬∫ valor ao 4¬∫ valor e coloque na caixa. Some a dezena guardada (se houver). Se o total for 10 ou mais, guarde a nova dezena.",
        5: "Somar o 4¬∫ valor ao 5¬∫ valor e coloque na caixa. Some a dezena guardada (se houver). Se o total for 10 ou mais, coloque a dezena na pr√≥xima casa (que ser√° a √∫ltima, √† esquerda)."
      };

      Swal.fire({
        title: `Ajuda: ${numero}¬∞ D√≠gito do Resultado`, // T√≠tulo mais claro
        text: mensagens[numero] || "A√ß√£o n√£o definida.",
        icon: 'info',
        confirmButtonText: 'Entendi!',
        confirmButtonColor: '#3085d6'
      });

      const arrow = document.getElementById("arrow");
      // Mapeia o n√∫mero do d√≠gito do resultado para o select correspondente no topo
      // O 1¬∫ d√≠gito do resultado depende do select1, 2¬∫ do select2+select1, 3¬∫ do select3+select2, etc.
      // A seta deve apontar para os selects relevantes para o c√°lculo daquele d√≠gito do RESULTADO.
      // Isso √© uma simplifica√ß√£o, pois a regra Trachtenberg envolve somar pares de d√≠gitos do n√∫mero original.
      // Para simplificar, faremos a seta apontar para o select que *corresponde* ao d√≠gito do resultado.
      // Digito 1 (mais √† direita): select1
      // Digito 2: select2
      // Digito 3: select3
      // Digito 4: select4
      // Digito 5: select5 (embora seja sempre 0, ele participa do c√°lculo do 5¬∫ d√≠gito do resultado, que √© select4 + select5 (0) + carry)
      let targetSelectId;
      switch (numero) {
          case 1: targetSelectId = 'select1'; break;
          case 2: targetSelectId = 'select2'; break; // O c√°lculo usa select2 e select1, mas apontar para select2 √© uma aproxima√ß√£o visual
          case 3: targetSelectId = 'select3'; break; // O c√°lculo usa select3 e select2, apontar para select3
          case 4: targetSelectId = 'select4'; break; // O c√°lculo usa select4 e select3, apontar para select4
          case 5: targetSelectId = 'select5'; break; // O c√°lculo usa select5 e select4, apontar para select5
          default: return; // Sai se o n√∫mero for inv√°lido
      }

      const targetSelect = document.getElementById(targetSelectId);


      if (targetSelect && arrow) {
        setTimeout(() => {
          const rect = targetSelect.getBoundingClientRect();
          const containerRect = document.querySelector(".centered-row.mb-5").getBoundingClientRect();

          const offsetX = rect.left - containerRect.left + (rect.width / 2) - (arrow.offsetWidth / 2);
          const offsetY = rect.top - containerRect.top - arrow.offsetHeight - 40; // Espa√ßo acima do select

          arrow.style.left = `${offsetX}px`;
          arrow.style.top = `${offsetY}px`;
          arrow.style.display = "block";

          setTimeout(() => {
            arrow.style.display = "none";
          }, 7000);
        }, 100);
      }
    }


    // Compara√ß√£o com resultado √ó11 (mantida, ajustada para iterar corretamente pelos selects e inputs)
    function multiplicarNumeroDosSelects() {
      const selectsValues = [];
      // Itera pelos selects de 1 a 4 (select5 √© fixo) para obter os valores do n√∫mero original
      for (let i = 1; i <= 4; i++) {
        const selectEl = document.getElementById(`select${i}`);
        if (selectEl) {
           selectsValues.push(selectEl.value.trim());
        }
      }
       // Adiciona o valor fixo do select5 (que est√° desabilitado)
       const select5El = document.getElementById('select5');
       if (select5El) {
            selectsValues.push(select5El.value.trim());
       }


      const inputsValues = [];
      // Itera pelos inputs de 1 a 5 para obter a resposta digitada
       for (let i = 1; i <= 5; i++) {
           const inputEl = document.getElementById(`input${i}`);
           if (inputEl) {
               inputsValues.push(inputEl.value.trim());
           }
       }


      // Inverter os arrays para ter os d√≠gitos na ordem correta (mais significativo √† esquerda)
       // selectsValues agora cont√©m ['select5', 'select4', 'select3', 'select2', 'select1']
       // inputsValues agora cont√©m ['input5', 'input4', 'input3', 'input2', 'input1']
       // A Metodologia Trachtenberg geralmente come√ßa da direita para a esquerda, mas o jogo monta o n√∫mero original com selects da esquerda para a direita (select5, select4...) e a resposta com inputs da esquerda para a direita (input5, input4...).
       // Vamos inverter os arrays para a compara√ß√£o fazer sentido do ponto de vista do n√∫mero formado.
       const numeroOriginalArr = selectsValues.reverse(); // Ex: ['select1', 'select2', 'select3', 'select4', 'select5']
       const numeroDigitadoArr = inputsValues.reverse(); // Ex: ['input1', 'input2', 'input3', 'input4', 'input5']

       const numeroOriginal = numeroOriginalArr.join('');
       const numeroDigitado = numeroDigitadoArr.join('');


      if (!numeroDigitado) { // Verifica apenas se a resposta foi digitada
        Swal.fire('‚ö†Ô∏è Aviso', 'Digite sua resposta nos campos abaixo.', 'warning');
        return;
      }
       // Opcional: Verificar se todos os inputs que *deveriam* ter um d√≠gito (baseado no resultado) foram preenchidos
       // Mas por enquanto, apenas verificar se *alguma* resposta foi digitada.


      const numeroConvertido = Number(numeroOriginal);
      if (isNaN(numeroConvertido)) {
        Swal.fire('Erro', 'Valor inv√°lido nos seletores. Certifique-se de que s√£o n√∫meros.', 'error');
        return;
      }

      const resultadoCorreto = String(numeroConvertido * 11);

       // Remove zeros √† esquerda da resposta digitada para compara√ß√£o (ex: "0123" vs "123")
       const numeroDigitadoSemZeros = numeroDigitado.replace(/^0+/, '');
       const resultadoCorretoSemZeros = resultadoCorreto.replace(/^0+/, '');


      if (numeroDigitadoSemZeros === resultadoCorretoSemZeros) {
        Swal.fire('‚úÖ Acertou!', `A multiplica√ß√£o de ${numeroOriginal} √ó 11 √©: ${resultadoCorreto}`, 'success');
      } else {
        Swal.fire('‚ùå Errou!', `Sua resposta digitada (${numeroDigitado}) est√° incorreta.\nO resultado correto de ${numeroOriginal} √ó 11 √©: ${resultadoCorreto}`, 'error');
      }
    }

    // Limpar selects e inputs (mantida, ajustada para iterar corretamente)
    function limparSelects() {
      // Limpa selects de 1 a 4 (select5 √© desabilitado)
      for (let i = 1; i <= 4; i++) {
        const selectEl = document.getElementById(`select${i}`);
        if (selectEl) selectEl.value = '0';
      }

       // Limpa inputs de 1 a 5
       for (let i = 1; i <= 5; i++) {
           const inputEl = document.getElementById(`input${i}`);
           if (inputEl) inputEl.value = '';
       }

       // Opcional: Limpar o select5 desabilitado se quiser garantir
       const select5El = document.getElementById('select5');
       if (select5El) select5El.value = '0';


      Swal.fire('üßπ Limpo!', 'Todos os valores foram limpos', 'info');
    }


  </script>

  </body>

</html>